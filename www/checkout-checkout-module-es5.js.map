{"version":3,"sources":["src/app/checkout/checkout.page.html","src/app/checkout/checkout.module.ts","src/app/checkout/checkout.page.scss","src/app/checkout/checkout.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n  <ion-buttons slot=\\\"start\\\">\\r\\n    &nbsp;<ion-icon slot=\\\"start\\\" name=\\\"arrow-back\\\" routerLink=\\\"/cart\\\" routerDirection=\\\"back\\\"></ion-icon> \\r\\n  </ion-buttons>\\r\\n    <ion-title>\\r\\n      \\r\\n      Pagar</ion-title>\\r\\n      \\r\\n  <ion-buttons slot=\\\"end\\\" *ngIf=\\\"data\\\">{{ total_amount | currency }} &nbsp;</ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content *ngIf=\\\"data\\\">\\r\\n\\r\\n<ion-card mode=\\\"ios\\\">\\r\\n\\r\\n<ion-card-header>\\r\\n\\r\\n<ion-card-title>Seleccionar tipo de orden</ion-card-title>\\r\\n\\r\\n</ion-card-header>\\r\\n\\r\\n<ion-card-content>\\r\\n\\r\\n<ion-list>\\r\\n\\r\\n\\r\\n<ion-item *ngIf=\\\"delivery_type == 0\\\">\\r\\n    <ion-label>Este comercio no tiene servicio a domicilio</ion-label>\\r\\n</ion-item>\\r\\n\\r\\n<ion-item *ngIf=\\\"delivery_type == 1\\\">\\r\\n<ion-label>Entrega a domicilio</ion-label>\\r\\n<ion-radio slot=\\\"start\\\" value=\\\"1\\\" (ionSelect)=\\\"setType(1)\\\" [checked]=\\\"otype == 1\\\"></ion-radio>\\r\\n</ion-item>\\r\\n\\r\\n<!-- <ion-item>\\r\\n<ion-label>Recoger en tienda (No se cobrará envío)</ion-label>\\r\\n<ion-radio slot=\\\"start\\\" value=\\\"2\\\" (ionSelect)=\\\"setType(2)\\\" [checked]=\\\"otype == 2\\\"></ion-radio>\\r\\n</ion-item> -->\\r\\n\\r\\n</ion-list>\\r\\n\\r\\n</ion-card-content>\\r\\n\\r\\n</ion-card>\\r\\n\\r\\n<ion-card mode=\\\"ios\\\">\\r\\n\\r\\n  <ion-card-header>\\r\\n\\r\\n  <ion-card-title>\\r\\n    Metodo de pago\\r\\n  </ion-card-title>\\r\\n\\r\\n  </ion-card-header>\\r\\n\\r\\n  <ion-card-content>\\r\\n  <ion-item style=\\\"font-size: 13px\\\">\\r\\n    <ion-label><img src=\\\"https://image.flaticon.com/icons/svg/760/760503.svg\\\" style=\\\"width:30px\\\"> Pagar en efectivo</ion-label>\\r\\n    <ion-radio slot=\\\"start\\\" value=\\\"1\\\" (ionSelect)=\\\"setPayment(1)\\\" [checked]=\\\"payment == 1\\\"></ion-radio>\\r\\n  </ion-item>\\r\\n\\r\\n\\r\\n  <ion-item style=\\\"font-size: 13px\\\" *ngIf=\\\"paypal_id\\\">\\r\\n  <ion-label><img src=\\\"assets/paypal.png\\\" style=\\\"width: 90px\\\"> <span style=\\\"margin-top: -40px\\\">Pay Via Paypal</span></ion-label>\\r\\n  <ion-radio slot=\\\"start\\\" value=\\\"2\\\" (ionSelect)=\\\"setPayment(2)\\\" [checked]=\\\"payment == 2\\\"></ion-radio>\\r\\n  </ion-item>\\r\\n\\r\\n\\r\\n  <ion-item style=\\\"font-size: 13px\\\" *ngIf=\\\"stripe_id\\\">\\r\\n    <ion-label><img src=\\\"assets/stripe.png\\\" style=\\\"width: 150px\\\"> <span style=\\\"margin-top: -40px\\\">Pay Via Stripe</span></ion-label>\\r\\n    <ion-radio slot=\\\"start\\\" value=\\\"2\\\" (ionSelect)=\\\"setPayment(3)\\\" [checked]=\\\"payment == 3\\\"></ion-radio>\\r\\n  </ion-item>\\r\\n  \\r\\n\\r\\n  <div *ngIf=\\\"stripeView\\\">\\r\\n\\r\\n    <p>Proporcione los siguientes detalles</p>\\r\\n    \\r\\n    <ion-row>\\r\\n    \\r\\n    <ion-col size=\\\"12\\\">\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"floating\\\">Card Number</ion-label>\\r\\n      <ion-input type=\\\"tel\\\" [(ngModel)]=\\\"card_no\\\" name=\\\"card_no\\\"></ion-input>\\r\\n    </ion-item>\\r\\n    </ion-col>\\r\\n    \\r\\n    <ion-col size=\\\"6\\\">\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"floating\\\">Exp Month</ion-label>\\r\\n      <ion-input type=\\\"tel\\\" [(ngModel)]=\\\"exp_month\\\" name=\\\"exp_month\\\"></ion-input>\\r\\n    </ion-item>\\r\\n    </ion-col>\\r\\n    \\r\\n    <ion-col size=\\\"6\\\">\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"floating\\\">Exp Year</ion-label>\\r\\n      <ion-input type=\\\"tel\\\" [(ngModel)]=\\\"exp_year\\\" name=\\\"exp_year\\\"></ion-input>\\r\\n    </ion-item>\\r\\n    </ion-col>\\r\\n    \\r\\n    <ion-col size=\\\"12\\\">\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"floating\\\">CVV</ion-label>\\r\\n      <ion-input type=\\\"tel\\\" [(ngModel)]=\\\"cvv\\\" name=\\\"cvv\\\"></ion-input>\\r\\n    </ion-item>\\r\\n    </ion-col>\\r\\n    \\r\\n    </ion-row>\\r\\n    \\r\\n  </div>\\r\\n  </ion-card-content>\\r\\n\\r\\n</ion-card>\\r\\n\\r\\n\\r\\n<div class=\\\"ion-padding\\\">\\r\\n\\r\\n<ion-item>\\r\\n<ion-textarea placeholder=\\\"Agrega Cualquier instrucción para la comida ... por ejemplo, extra picante\\\" [(ngModel)]=\\\"notes\\\" name=\\\"notes\\\"></ion-textarea>\\r\\n</ion-item>\\r\\n<br>\\r\\n<ion-button expand=\\\"block\\\" mode=\\\"ios\\\" type=\\\"button\\\" [disabled]=\\\"!formVal()\\\" (click)=\\\"makeOrder()\\\">Confirmar orden</ion-button>\\r\\n\\r\\n</div>\\r\\n\\r\\n<br>\\r\\n\\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { CheckoutPage } from './checkout.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CheckoutPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [CheckoutPage]\r\n})\r\nexport class CheckoutPageModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NoZWNrb3V0L2NoZWNrb3V0LnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\r\nimport { ServerService } from '../service/server.service';\r\nimport { ToastController,LoadingController,NavController } from '@ionic/angular';\r\nimport { PayPal, PayPalPayment, PayPalConfiguration } from '@ionic-native/paypal/ngx';\r\nimport { Stripe } from '@ionic-native/stripe/ngx';\r\n\r\n@Component({\r\n  selector: 'app-checkout',\r\n  templateUrl: './checkout.page.html',\r\n  styleUrls: ['./checkout.page.scss'],\r\n})\r\n\r\nexport class CheckoutPage implements OnInit {\r\n\r\n  data:any;\r\n  address:any;\r\n  payment:any;\r\n  payment_id : any;\r\n  total_amount:any;\r\n  paypal_id:any;\r\n  Cuenta_clave:any;\r\n  banco_name:any;\r\n  text:any;\r\n  stripe_id:any;\r\n  stripeView = false;\r\n  card_no:any;\r\n  exp_month:any;\r\n  exp_year:any;\r\n  cvv:any;\r\n  notes:any;\r\n  delivery_type:any;\r\n  admin:any;\r\n  delivery_status: any;\r\n  delivery_charges: any;\r\n  otype:number = 1;\r\n  constructor(public server : ServerService,public toastController: ToastController,public loadingController: LoadingController,private nav: NavController,private payPal: PayPal,private stripe: Stripe,\r\n    )\r\n  {\r\n    this.text = JSON.parse(localStorage.getItem('app_text'));\r\n    this.address = localStorage.getItem('address_id');\r\n    this.admin = JSON.parse(localStorage.getItem('admin'));\r\n  }\r\n\r\n  ngOnInit()\r\n  {\r\n  \r\n  }\r\n\r\n  ionViewWillEnter()\r\n  {\r\n    if(!localStorage.getItem('user_id') || localStorage.getItem('user_id') == 'null')\r\n    {\r\n      this.nav.navigateRoot('/login');\r\n\r\n      this.presentToast(\"Please login for continue.\");\r\n    }\r\n    else\r\n    {\r\n\r\n      this.loadData();\r\n    }\r\n  }\r\n\r\n\r\n  setType(id)\r\n  {\r\n    if (id == 2) {\r\n      this.total_amount = Number(this.total_amount) - Number(this.delivery_charges);\r\n      this.delivery_status = false;\r\n    }else {\r\n      if (this.delivery_status == false) {\r\n        this.total_amount = Number(this.total_amount) + Number(this.delivery_charges);\r\n      }\r\n    }\r\n\r\n    this.otype = id;\r\n    this.payment = false;\r\n    this.stripeView = false;\r\n  }\r\n\r\n  formVal()\r\n  {\r\n    if(this.otype == 1)\r\n    {\r\n      if(!this.address || !this.payment)\r\n      {\r\n        return false;\r\n      }\r\n      else\r\n      {\r\n        return true;\r\n      }\r\n    }\r\n    else\r\n    {\r\n      if(!this.payment)\r\n      {\r\n        return false;\r\n      }\r\n      else\r\n      {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n  setPayment(id)\r\n  {\r\n    this.payment = id;\r\n\r\n    if(id == 3)\r\n    {\r\n      this.stripeView = true;\r\n    }\r\n    else\r\n    {\r\n      this.stripeView = false;\r\n    }\r\n  }\r\n\r\n  async loadData()\r\n  {\r\n  \tconst loading = await this.loadingController.create({\r\n      message: 'Espere porfavor...',\r\n      mode: 'ios'\r\n    });\r\n    await loading.present();\r\n\r\n    var lid = localStorage.getItem('lid') ? localStorage.getItem('lid') : 0;\r\n    var lat = localStorage.getItem(\"current_lat\") ? localStorage.getItem(\"current_lat\") : 0;\r\n    var lng = localStorage.getItem(\"current_lng\") ? localStorage.getItem(\"current_lng\") : 0;\r\n\r\n    this.server.getCart(localStorage.getItem('cart_no')+\"?lid=\"+lid+\"&lat=\"+lat+\"&lng=\"+lng).subscribe((response:any) => {\r\n     \r\n      var store_id = response.data.data[0].store_id;  \r\n      this.server.getDeliveryType(store_id).subscribe(data => {\r\n        this.delivery_type = data[0][0].service_del;\r\n        if (this.delivery_type == 0) {\r\n          this.otype = 2;\r\n        }\r\n      });\r\n  \r\n      // localStorage.getItem('user_id')\r\n      this.server.getAddress(localStorage.getItem('user_id')+\"?cart_no=\"+localStorage.getItem('cart_no')+\"&store=\"+store_id+\"&lid=\"+lid+\"&lat=\"+lat+\"&lng=\"+lng).subscribe((response:any) => {\r\n        \r\n      this.data         = response.data;\r\n      console.log(this.data);\r\n      if (response.data.address.length > 0) {\r\n        // this.address      = response.data.address[0].id; // Marcamos la primer opcion que tenga\r\n      }else {\r\n        this.nav.navigateRoot('/address');\r\n      }\r\n      this.total_amount = (response.data.total);\r\n      this.delivery_charges = response.data.Comercio.delivery_charges_value;\r\n      if(response.data.Comercio.Cuenta_clave)\r\n      {\r\n        this.Cuenta_clave = response.data.Comercio.Cuenta_clave;\r\n        this.banco_name   = response.data.Comercio.banco_name;\r\n      }\r\n      \r\n      if(this.admin.paypal_client_id)\r\n      {\r\n          this.paypal_id    = this.admin.paypal_client_id;\r\n      }\r\n\r\n      if(this.admin.stripe_client_id)\r\n      {\r\n         this.stripe_id    = this.admin.stripe_client_id;\r\n      }\r\n   });\r\n\r\n  \tloading.dismiss();\r\n\r\n  \t});\r\n  }\r\n\r\n  makeOrder()\r\n  {\r\n    if(this.payment == 2)\r\n    {\r\n      this.payPaypal();\r\n    }\r\n    else if(this.payment == 3)\r\n    {\r\n      this.payWithStripe();\r\n      \r\n    }\r\n    else\r\n    {\r\n      this.order();\r\n    }\r\n  }\r\n\r\n  async order()\r\n  {\r\n    const loading = await this.loadingController.create({\r\n      message: 'Porfavor espere...',\r\n      mode: 'ios'\r\n    });\r\n    await loading.present();\r\n    \r\n    var lat = localStorage.getItem(\"current_lat\") ? localStorage.getItem(\"current_lat\") : 0;\r\n    var lng = localStorage.getItem(\"current_lng\") ? localStorage.getItem(\"current_lng\") : 0;\r\n\r\n    var allData = {\r\n        user_id : localStorage.getItem('user_id'),\r\n        payment : this.payment,\r\n        address : this.address,\r\n        cart_no : localStorage.getItem('cart_no'),\r\n        payment_id : this.payment_id,\r\n        otype : this.otype,\r\n        notes:this.notes,\r\n        lat: lat,\r\n        lng: lng\r\n      }\r\n\r\n      console.log(lat, lng);\r\n    \r\n    this.server.order(allData).subscribe((response:any) => {\r\n     \r\n      if (response.data == 'Not_service') {\r\n        loading.dismiss();\r\n        this.presentToast('Sin servicio en la ubicación Seleccionada');\r\n      }else {\r\n        let LastStore = JSON.parse(localStorage.getItem('menu_item'));\r\n        let dataLS =  [];\r\n        if (localStorage.getItem('LastStore')) {\r\n          dataLS = JSON.parse(localStorage.getItem('LastStore'));\r\n          let has  = dataLS.find(id => id = LastStore.id);\r\n          if (has.store_id != LastStore.id) {\r\n            dataLS.push({\r\n              store_id: LastStore.id\r\n            });\r\n          }\r\n        }else {\r\n          dataLS.push({\r\n            store_id: LastStore.id\r\n          });\r\n        }\r\n\r\n        localStorage.setItem('LastStore', JSON.stringify(dataLS));\r\n\r\n        localStorage.setItem('order_data', JSON.stringify(response.data));\r\n        // Agregamos a ultimas ordenes\r\n\r\n        this.nav.navigateRoot('/done');\r\n\r\n        loading.dismiss();\r\n      }\r\n    });\r\n  }\r\n\r\n  payPaypal()\r\n  { \r\n      this.payPal.init({\r\n      PayPalEnvironmentProduction: this.paypal_id,\r\n      PayPalEnvironmentSandbox: this.paypal_id\r\n      }).then(() => {\r\n        // Environments: PayPalEnvironmentNoNetwork, PayPalEnvironmentSandbox, PayPalEnvironmentProduction\r\n        this.payPal.prepareToRender('PayPalEnvironmentProduction', new PayPalConfiguration({\r\n          // Only needed if you get an \"Internal Service Error\" after PayPal login!\r\n          //payPalShippingAddressOption: 2 // PayPalShippingAddressOptionPayPal\r\n        })).then(() => {\r\n          let payment = new PayPalPayment(this.total_amount, 'MXN', 'Description', 'sale');\r\n          this.payPal.renderSinglePaymentUI(payment).then((res) => {\r\n            \r\n            this.payment_id = res.response.id;\r\n\r\n            if(this.payment_id)\r\n            {\r\n              this.order();\r\n            }\r\n\r\n          }, () => {\r\n            \r\n            this.presentToast(\"Paypal Transaction Cancelled\");\r\n\r\n          });\r\n        }, () => {\r\n\r\n          this.presentToast(\"Error in configuration\");\r\n\r\n        });\r\n      }, () => {\r\n        // \r\n\r\n          this.presentToast(\"Error in initialization, maybe PayPal isn't supported\");\r\n\r\n      });\r\n  }\r\n\r\n  payWithStripe()\r\n  {\r\n    if(this.card_no.length > 10 && this.exp_month && this.exp_year && this.cvv)\r\n    {\r\n      \r\n        this.stripe.setPublishableKey(this.stripe_id);\r\n\r\n        let card = {\r\n         number: this.card_no,\r\n         expMonth: this.exp_month,\r\n         expYear: this.exp_year,\r\n         cvc: this.cvv\r\n        }\r\n        this.stripe.createCardToken(card)\r\n          .then(token => {\r\n            this.makePayment(token.id);\r\n          })\r\n          .catch(error => {\r\n          this.presentToast(\"Por favor ingrese detalles de pago válidos\");\r\n\r\n          });\r\n    }\r\n    else\r\n    {\r\n      this.presentToast(\"Por favor ingrese detalles de pago válidos\");\r\n    }\r\n  }\r\n\r\n  payWithTransfer() {\r\n    this.presentToast(\"Una vez realizada la transferencia no te olvides de enviarle el ticket al comercio.\");\r\n    this.payment_id = 0;\r\n    this.order();\r\n  }\r\n\r\n  async makePayment(token)\r\n  {\r\n    const loading = await this.loadingController.create({\r\n      message: 'Enviando Informacion...',\r\n      mode: 'ios'\r\n    });\r\n    await loading.present();\r\n\r\n    this.server.makeStripePayment(\"?token=\"+token+\"&amount=\"+this.total_amount).subscribe((response:any) => {\r\n\r\n    if(response.data == \"done\")\r\n    {\r\n        this.payment_id = response.id;\r\n\r\n        if(this.payment_id)\r\n        {\r\n          this.order();\r\n        }\r\n    }\r\n    else\r\n    {\r\n      this.presentToast(\"Algo salió mal. Por favor, vuelva a intentarlo.\");\r\n    }\r\n\r\n    loading.dismiss();\r\n\r\n    });\r\n  }\r\n\r\n  async presentToast(txt) {\r\n    const toast = await this.toastController.create({\r\n      message: txt,\r\n      duration: 2000,\r\n      position : 'bottom'\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///","file":"checkout-checkout-module-es5.js"}